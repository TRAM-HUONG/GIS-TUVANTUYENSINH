{% extends "layout/layout.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/truong_detail.css' %}">
{% endblock %}

{% block content %}
<section class="td-wrap">

  <!-- HERO -->
  <div class="td-hero">
    <div class="td-hero-left">
      <div class="td-brand">
        <div class="td-titlebox">
          <h1 class="td-title">{{ truong.tentruong }}</h1>
          <div class="td-badges">
            <span class="badge badge-a">ğŸ›ï¸ {{ truong.loaitruong }}</span>
            <span class="badge badge-b">ğŸ†” {{ truong.matruong }}</span>
          </div>
        </div>
      </div>

      <div class="td-meta">
        <div class="meta-item">
          <div class="meta-label">ğŸ“ Äá»‹a chá»‰</div>
          <div class="meta-value">{{ truong.diachi }}</div>
        </div>

        <div class="meta-item">
          <div class="meta-label">ğŸŒ Website</div>
          <div class="meta-value">
            <a class="td-link" href="{{ truong.website }}" target="_blank" rel="noopener">
              {{ truong.website }}
            </a>
          </div>
        </div>
        {% if ctt %}
        <div class="meta-item">
          <div class="meta-label">ğŸ“ Ghi chÃº</div>
          <div class="meta-value">{{ ctt.ghichu }}</div>
        </div>
        {% endif %}
      </div>
    </div>

    <!-- áº¢NH TRÆ¯á»œNG -->
    <div class="td-hero-right">
      {% if hinh_truong %}
        <img class="td-cover" src="{% static 'img/TDH/' %}{{ hinh_truong.tenfile }}" alt="áº¢nh {{ truong.tentruong }}">
      {% else %}
        <div class="td-cover-empty">
          ğŸ“· ChÆ°a cÃ³ áº£nh trÆ°á»ng trong HINHANH
        </div>
      {% endif %}
    </div>
  </div>

  <!-- Khung báº£n Ä‘á»“ -->
  <div class="card">
    <div class="card-head">
      <h2 class="card-title">ğŸ—ºï¸ Báº£n Ä‘á»“ trÆ°á»ng</h2>
    </div>
    <div class="card-body">
      <!-- NhÃºng báº£n Ä‘á»“ OpenStreetMap -->
      <iframe
        width="100%"
        height="400"
        src="https://www.openstreetmap.org/export/embed.html?bbox=106.55%2C10.70%2C106.80%2C10.90&layer=mapnik"
        loading="lazy"
        referrerpolicy="no-referrer-when-downgrade"
        title="OpenStreetMap"
      ></iframe>
    </div>
  </div>

  <!-- CONTENT GRID -->
  <div class="td-grid">

    <!-- MÃ” Táº¢ TRÆ¯á»œNG -->
    <div class="card">
      <div class="card-head">
        <h2 class="card-title">âœ¨ MÃ´ táº£ trÆ°á»ng</h2>
      </div>
      <div class="card-body">
        {% if ctt %}
          <p class="desc">{{ ctt.mota }}</p>
        {% else %}
          <p class="desc muted">ChÆ°a cÃ³ mÃ´ táº£. (ThÃªm vÃ o báº£ng CHITIETTRUONG)</p>
        {% endif %}
      </div>
    </div>

    <!-- NGÃ€NH LIÃŠN QUAN -->
    <div class="card">
      <div class="card-head">
        <h2 class="card-title">ğŸ“ NgÃ nh Ä‘Ã o táº¡o liÃªn quan</h2>
        <div class="card-sub">Danh sÃ¡ch ngÃ nh theo trÆ°á»ng</div>
      </div>

      <div class="card-body">
        {% if ct_nganh %}
        <div class="major-list">
          {% for x in ct_nganh %}
            <div class="major-item">
               <div class="major-top">
                  <a href="javascript:void(0)" onclick="showDetails('{{ x.manganh.id }}')" class="major-name">{{ x.manganh.tennganh }}</a>
                </div>
                <div id="details-{{ x.manganh.id }}" class="major-details" style="display: none;">
                  <p><b>MÃ£ ngÃ nh:</b> {{ x.manganh.manganh }}</p>
                  <p><b>MÃ´ táº£:</b> {{ x.manganh.mota }}</p>
                  <p><b>Há»c phÃ­:</b> {{ x.hocphi }}</p>
                  <p><b>Thá»i gian há»c:</b> {{ x.thoigianhoc }}</p>
                </div>
           </div>
          {% endfor %}
        </div>

          </div>
        {% else %}
          <div class="desc muted">ChÆ°a cÃ³ ngÃ nh liÃªn quan. (ThÃªm vÃ o báº£ng CHITIETNGANH)</div>
        {% endif %}
      </div>
    </div>

    <a class="back-btn" href="{% url 'home' %}">â¬… Quay láº¡i Trang Chá»§</a>
  </div>
</section>

<script>
  // HÃ m Ä‘á»ƒ hiá»ƒn thá»‹ hoáº·c áº©n chi tiáº¿t ngÃ nh
  function showDetails(majorId) {
    var detailsDiv = document.getElementById("details-" + majorId);
    if (detailsDiv.style.display === "none") {
      detailsDiv.style.display = "block";
    } else {
      detailsDiv.style.display = "none";
    }
  }
</script>

{% endblock %}

